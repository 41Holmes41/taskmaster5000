<% include ./partials/nogroupheader.ejs %>


<div class="container">

  <% if (userPopulated) { %>

  <div class="row">
    <div class="col s12">
      <div class="row center">
        <div class="col s12 m12 center">
          <div class="card blue-grey darken-1">
            <div class="card-content white-text">
              <span class="card-title center">Group Tools</span>
              <p class="center">Groups are essential to effectively managing your tasks. Create a group for any
                purpose or edit an existing one!</p>
            </div>
            <div class="card-action center">
              <a href="groups/new">Create</a>
              <a href="groups/editselectgroup">Edit</a>
              <a href="groups/deleteselectgroup"> Delete</a>
              <a href="groups/join"> Join </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div class="row">
    
    <div class="col s12">
      <div class="row center">
        <div class="col s12 m12 center">


          <div class="card blue-grey darken-1">
            <div class="card-content white-text">
              <% if (userPopulated.groups[0]) { %>

                <span class="card-title center">Your Created Groups</span>
                <div class="row">
              <% userPopulated.groups.forEach(function(group) { %>

              <% if (userPopulated._id.equals(group.creator._id)) { %>
                <div class="col s6 m4">
              <a href="/dashboard/<%=group._id%>">
                <div class="card blue">
                  <div class="card-content white-text">
                    <span class="card-title center"><%= group.name %></span>
                    <p><%= group.description %></p>
                  </div>
                </div>
              </a>
            </div>
              <% } %>
              <% }) %>
            </div>
            
              <span class="card-title center">Your Joined Groups</span>
              <div class="row">
              <% userPopulated.groups.forEach(function(group) { %>
              <% if (userPopulated._id.equals(group.creator._id)) { %>
              <% } else{ %>
                <div class="col s6 m4">
                <a href="/dashboard/<%=group._id%>">
                  <div class="card blue">
                    <div class="card-content white-text">
                      <span class="card-title center"><%= group.name %></span>
                      <p><%= group.description %></p>
                    </div>
                  </div>
                </a>
              </div>
              <% } %>
              <% }) %>
            </div>

              <% } else { %>
              <div class="card-content white-text">
                <p class="center">You are not a part of any groups yet. Try making your own!</p>
              </div>
              <% } %>
            </div>
          </div>

        </div>
      </div>
    </div>
  
  </div>



  <% } else { %>
  <h5 class="center teal-text text-lighten-1">Welcome to </h5>
  <h2 class="center teal-text text-lighten-1">Taskmaster5000 </h2>
  <h5 class="center teal-text text-lighten-1">Please sign-in to begin!</h5>
  <div class="center">
    <a class="center waves-effect waves-light btn-large" href="/auth/google"><i
        class="material-icons left">vpn_key</i>Login with Google</a>
  </div>

  <% } %>




  <% include ./partials/nogroupfooter.ejs %>
